<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <!-- This record will create the building block and its layout -->
    <template id="index" name="Cargo Tracking">
        <section>
            <t t-call="website.layout">
                <div id="wrap">
                    <div class="oe_structure">
                        <section class="s_title parallax s_parallax_is_fixed bg-black-50 pt24 pb24" data-vcss="001" data-snippet="s_title" data-scroll-background-ratio="1">
                                <span class="s_parallax_bg oe_img_bg" style="background-image: url('/web/image/website.s_banner_default_image'); background-position: 50% 0;"/>
                                <div class="o_we_bg_filter bg-black-50"/>
                                <div class="container">
                                    <h1 text="center">Cargo Tracking</h1>
                                </div>
                        </section>
                    </div>
                    <div class="container">
                        <br />
                        <h3 class="text-center">
                            <t t-set="item" t-value="hawbnum"/>
                            <t t-esc="item"/>
                        </h3>
                        <br />
                        <form class="mt8" role="search" t-attf-action="/tracking/" method="get">
                            <t t-call="imerex_api_tracking.tracking_search_box"/>
                        </form>
                        <div t-if="not cargoapi" class="col-lg-8 offset-lg-2" role="alert">
                            <p><center>Search for your Cargo with a Barcode Number or HAWB</center></p>
                        </div>
                        <div t-else="" class="table-responsive">
                            <table class="table table-hover">
                                <thead>
                                    <tr >
                                    <t t-if="searchtype == 'hawb'">
                                        <th >Box Barcode</th>
                                    </t>
                                        <th >Transfer Date</th>
                                        <th >Time</th>
                                        <th >Status</th>
                                        <th >Description</th>
                                    </tr>
                                </thead>
                                    <t t-foreach="cargoapi" t-as="items">
                                        <tr>
                                            <t t-if="searchtype == 'hawb'">
                                                <td>
                                                    <a t-att-href="'/tracking?search=' + items.get('qrbarcode')"><t t-esc="items.get('qrbarcode')" /></a>
                                                </td>
                                            </t>
                                            <td >
                                                <t t-esc="items.get('transferdate').split('T')[0]" />
                                            </td>
                                            <td >
                                                <t t-esc="items.get('transferdate').split('T')[1].split('.')[0]" />
                                            </td>
                                            <td >
                                                <t t-esc="items.get('statusname')" />
                                            </td>
                                            <td >
                                                <t t-esc="items.get('statusText') or ''"/>
                                            </td>
                                        </tr>
                                    </t>
                            </table>
                        </div>
                    </div>
                </div>
                <br />
            </t>
        </section>
    </template>

    <template id="iMerex" name="Imerex Search">
        <section id="imerex_wrap" >
            <div class="container" id="imerex_tracking_page">
                <h3 class="mt16 text-center">CARGO TRACKING</h3>
                <form class="mt8" role="search" t-attf-action="/tracking/" method="get">
                    <t t-call="imerex_api_tracking.tracking_search_box"/>
                </form>
                <div t-if="not cargoapi" class="col-lg-8 offset-lg-2" role="alert">
                    <p><center>Search for your Cargo with a Barcode Number or HAWB</center></p>
                </div>
            </div>
        </section>
    </template>

    <template id="track_search" inherit_id="website.snippets" name="CircuitTrack Search">
        <xpath expr="//div[@id='snippet_structure']" position="inside">
            <div class="o_panel_body">
                <t t-snippet="imerex_api_tracking.iMerex"
                   t-thumbnail="/imerex_api_tracking/static/src/img/track_search.png"/>
            </div>
        </xpath>
    </template>

    <template id="tracking_search_box" name="Tracking Searchbox">
        <div t-attf-class="input-group #{_classes}" role="search">
            <t t-set="search_placeholder">Search...</t>
            <input type="search" name="search" class="search-query form-control oe_search_box" t-att-placeholder="placeholder if placeholder else search_placeholder" t-att-value="search"/>
            <div class="input-group-append">
                <button type="submit" class="btn btn-primary oe_search_button" aria-label="Search" title="Search"><i class="fa fa-search"/></button>
            </div>
        </div>
    </template>

    <template id="assets_frontend" inherit_id="website.assets_frontend">
        <xpath expr="link[last()]" position="after">
            <link rel="stylesheet" type="text/scss" href="/imerex_api_tracking/static/src/scss/imerex_api_tracking.scss" />
        </xpath>
        <!-- <xpath expr="script[last()]" position="after">
            <script type="text/javascript" src="/sale/static/src/js/variant_mixin.js"></script>
            <script type="text/javascript" src="/website_sale/static/src/js/variant_mixin.js"></script>
            <script type="text/javascript" src="/website_sale/static/src/js/website_sale.js"></script>
            <script type="text/javascript" src="/website_sale/static/src/js/website_sale_utils.js"></script>
            <script type="text/javascript" src="/website_sale/static/src/js/website_sale_payment.js"></script>
            <script type="text/javascript" src="/website_sale/static/src/js/website_sale_validate.js"></script>
            <script type="text/javascript" src="/website_sale/static/src/js/website_sale_recently_viewed.js"></script>
            <script type="text/javascript" src="/website_sale/static/src/js/website_sale_tracking.js"></script>
        </xpath> -->
    </template>
</odoo>
